import{b as K,d as Y}from"./chunk-HEQS3XIX.js";import{d as x,e as V,f as S,h as F,i as L,j as R,k as D}from"./chunk-VWKJVGVK.js";import{C as B,D as z,E as H,F as J,s as O,t as P,u as I,w as M,y as j,z as A}from"./chunk-OIS752W6.js";import{Ea as l,Fa as d,Pa as f,Sa as v,Ua as g,Va as n,Wa as r,Xa as C,Ya as _,Za as c,_a as s,ab as p,bb as y,f as w,fa as b,fb as h,gb as U,hb as E,oa as m,pa as u,rb as T}from"./chunk-X5LPCB6T.js";var Z=[{path:"",loadComponent:()=>import("./chunk-OARWU7EJ.js").then(e=>e.BienvenidaComponent)},{path:"login",loadComponent:()=>import("./chunk-7GDTE5PH.js").then(e=>e.LoginComponent)},{path:"registroEspecialista",loadComponent:()=>import("./chunk-YLLGG2EB.js").then(e=>e.RegistroEspecialistaComponent)},{path:"registroAdmin",loadComponent:()=>import("./chunk-SDIDGXMP.js").then(e=>e.RegistroAdminComponent)},{path:"registroPaciente",loadComponent:()=>import("./chunk-GVCLQTFX.js").then(e=>e.RegistroPacienteComponent)},{path:"home",loadComponent:()=>import("./chunk-ECNIPIDQ.js").then(e=>e.HomeComponent)},{path:"seccionUsuarios",loadComponent:()=>import("./chunk-MF3QMXGD.js").then(e=>e.SeccionUsuariosComponent)}];var q={providers:[T({eventCoalescing:!0}),D(Z),O(()=>P({projectId:"ppsutn-2ed7e",appId:"1:267759925710:web:6381a62635f81bc8bad39f",databaseURL:"https://ppsutn-2ed7e-default-rtdb.firebaseio.com",storageBucket:"ppsutn-2ed7e.appspot.com",apiKey:"AIzaSyDf58JneS7B_Y1oyFvSp2nkbIDguE5lrmU",authDomain:"ppsutn-2ed7e.firebaseapp.com",messagingSenderId:"267759925710"})),M(()=>j()),z(()=>H()),K(()=>Y())]};function $(e,o){if(e&1){let t=_();n(0,"a",12),c("click",function(){m(t);let a=s(2);return u(a.seccionUsuarios())}),p(1,"Usuarios"),r()}}function ee(e,o){if(e&1){let t=_();n(0,"a",12),c("click",function(){m(t);let a=s(2);return u(a.home())}),p(1,"Inicio de paciente"),r()}}function te(e,o){if(e&1){let t=_();n(0,"a",12),c("click",function(){m(t);let a=s(2);return u(a.home())}),p(1,"Inicio de especialista"),r()}}function oe(e,o){if(e&1&&(n(0,"ul",6)(1,"li",10),f(2,$,2,0,"a",11)(3,ee,2,0,"a",11)(4,te,2,0,"a",11),r()()),e&2){let t=s();l(2),g(t.rol=="admin"?2:-1),l(),g(t.rol=="paciente"?3:-1),l(),g(t.rol=="especialista"?4:-1)}}function ie(e,o){if(e&1&&(n(0,"div")(1,"label",13),p(2),r()()),e&2){let t=s();l(2),y(t.nombreUsuario)}}function ne(e,o){if(e&1){let t=_();n(0,"button",14),c("click",function(){m(t);let a=s();return u(a.cerrarSesion())}),p(1," Cerrar Sesi\xF3n "),r()}}function re(e,o){if(e&1){let t=_();n(0,"button",14),c("click",function(){m(t);let a=s();return u(a.iniciarSesion())}),p(1," Iniciar Sesi\xF3n "),r()}}var N=class e{constructor(o,t,i){this.firestoreService=o;this.auth=t;this.router=i}usuarioLogueado=null;rutaActual="";load;rol="";nombreUsuario="";ngOnInit(){A(this.auth,o=>w(this,null,function*(){if(this.usuarioLogueado=o,this.rutaActual=this.router.url,o?.uid)try{let t=yield this.firestoreService.getUsuarioInfo(o.uid);this.nombreUsuario=t?.nombre+t?.apellido,t?.rol?(this.rol=t.rol,console.log("Rol del usuario:",this.rol)):console.warn("El usuario no tiene un rol definido en Firestore.")}catch(t){console.error("Error al obtener la informaci\xF3n del usuario:",t)}else console.log("No hay un usuario logueado.");this.load=Promise.resolve(!0)}))}seccionUsuarios(){this.router.navigate(["/seccionUsuarios"])}home(){this.router.navigate(["/home"])}iniciarSesion(){this.router.navigate(["/login"])}cerrarSesion(){B(this.auth).then(()=>{this.router.navigate(["/login"])})}static \u0275fac=function(t){return new(t||e)(d(J),d(I),d(R))};static \u0275cmp=b({type:e,selectors:[["app-navbar"]],standalone:!0,features:[h],decls:13,vars:6,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],["routerLink","/home",1,"navbar-brand",3,"click"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"d-flex"],[4,"ngIf"],["class","btn btn-outline-light",3,"click",4,"ngIf"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link"],["routerLinkActive","active",1,"nav-link",3,"click"],["for","nombreUsuario",1,"labelNombre"],[1,"btn","btn-outline-light",3,"click"]],template:function(t,i){t&1&&(n(0,"nav",0)(1,"div",1)(2,"a",2),c("click",function(){return i.home()}),p(3,"Clinica"),r(),n(4,"button",3),C(5,"span",4),r(),n(6,"div",5),f(7,oe,5,3,"ul",6),U(8,"async"),r(),n(9,"div",7),f(10,ie,3,1,"div",8)(11,ne,2,0,"button",9)(12,re,2,0,"button",9),r()()()),t&2&&(l(7),g(E(8,4,i.load)?7:-1),l(3),v("ngIf",i.usuarioLogueado),l(),v("ngIf",i.usuarioLogueado),l(),v("ngIf",!i.usuarioLogueado&&i.rutaActual=="registroPaciente"))},dependencies:[S,x,V],styles:[".labelNombre[_ngcontent-%COMP%]{color:#ff0;margin-right:20px}"]})};function ae(e,o){e&1&&(n(0,"div"),C(1,"app-navbar"),r())}var k=class e{constructor(o){this.auth=o}title="clinica-online";usuarioLogueado=null;ngOnInit(){A(this.auth,o=>{this.usuarioLogueado=o,console.log("Usuario actual:",o)})}static \u0275fac=function(t){return new(t||e)(d(I))};static \u0275cmp=b({type:e,selectors:[["app-root"]],standalone:!0,features:[h],decls:2,vars:1,consts:[[4,"ngIf"]],template:function(t,i){t&1&&(f(0,ae,2,0,"div",0),C(1,"router-outlet")),t&2&&v("ngIf",i.usuarioLogueado!=null)},dependencies:[L,N,S,x]})};F(k,q).catch(e=>console.error(e));
