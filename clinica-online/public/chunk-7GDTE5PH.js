import{a as w,b as d,c as I,d as R,e as L,g as N,h as A,l as G,n as U}from"./chunk-BOPBXZUS.js";import{a as D}from"./chunk-BLVJNDES.js";import{c as O,d as k,f as M,j as P}from"./chunk-VWKJVGVK.js";import{F as V}from"./chunk-OIS752W6.js";import{$a as E,Ca as F,Ea as c,Fa as m,Pa as f,Sa as p,Va as i,Wa as t,Xa as u,Ya as _,Za as b,_a as h,ab as l,bb as j,cb as y,f as g,fa as v,fb as S,oa as x,pa as C}from"./chunk-X5LPCB6T.js";function z(r,o){if(r&1){let e=_();i(0,"button",13),b("click",function(){let a=x(e).$implicit,s=h();return C(s.rellenarUsuario(a))}),u(1,"img",14),i(2,"span"),l(3),t()()}if(r&2){let e=o.$implicit;c(),E("alt",e.nombre),p("src",e.imagen,F),c(2),j(e.nombre)}}function B(r,o){if(r&1&&(i(0,"div")(1,"strong")(2,"label",15),l(3),t()()()),r&2){let e=h();c(3),y(" ",e.msjError," ")}}var T=class r{constructor(o,e,n,a){this.router=o;this.fb=e;this.auth=n;this.firestore=a;this.loginForm=this.fb.group({correo:["",[d.required,d.email]],contrasena:["",[d.required,d.minLength(6)]]})}loginForm;msjError="";usuariosRapidos=[{nombre:"Paciente 1",correo:"dominic@gmail.com",contrasena:"12345678",imagen:"https://firebasestorage.googleapis.com/v0/b/ppsutn-2ed7e.appspot.com/o/fotosperfil%2F1732603765425-dominic.jpeg?alt=media&token=4011e3c4-f6df-4ef7-bf09-c4a70de63649"},{nombre:"Paciente 2",correo:"jordana@gmail.com",contrasena:"12345678",imagen:"https://firebasestorage.googleapis.com/v0/b/ppsutn-2ed7e.appspot.com/o/fotosperfil%2F1732603941641-jordana.jpg?alt=media&token=74093de3-77e4-4c42-b98c-9af6c07515ac"},{nombre:"Paciente 3",correo:"hugh@gmail.com",contrasena:"12345678",imagen:"https://firebasestorage.googleapis.com/v0/b/ppsutn-2ed7e.appspot.com/o/fotosperfil%2F1732604105493-drHouse.jpeg?alt=media&token=081d7297-81a3-4be3-9dcd-12e90705978f"},{nombre:"Especialista 1",correo:"david@gmail.com",contrasena:"12345678",imagen:"https://firebasestorage.googleapis.com/v0/b/ppsutn-2ed7e.appspot.com/o/fotosperfil%2F1732603526550-davo.jpeg?alt=media&token=4ef21d52-ea70-4ce6-a77a-dd20689c7fe0"},{nombre:"Especialista 2",correo:"messi@gmail.com",contrasena:"12345645",imagen:"https://firebasestorage.googleapis.com/v0/b/ppsutn-2ed7e.appspot.com/o/fotosperfil%2F1732603014197-messi.jpg?alt=media&token=df6986b1-34b6-4014-b6cc-11e6deac5031"},{nombre:"Admin",correo:"julianAdmin@gmail.com",contrasena:"12345678",imagen:"https://firebasestorage.googleapis.com/v0/b/ppsutn-2ed7e.appspot.com/o/fotosperfil%2F1732605540296-illia.jpeg?alt=media&token=dcd34edb-55dc-4342-aefc-407790cde3cc"}];rellenarUsuario(o){this.loginForm.setValue({correo:o.correo,contrasena:o.contrasena})}onLogin(){this.loginForm.valid?(this.Login(),this.GuardarRegistroExitoso()):console.log("Formulario inv\xE1lido")}Login(){let o=["dominic@gmail.com","jordana@gmail.com","hugh@gmail.com","david@gmail.com","messi@gmail.com","julianAdmin@gmail.com"],e=this.loginForm.get("correo")?.value,n=this.loginForm.get("contrasena")?.value;this.firestore.getEspecialistaByCorreo(e).then(a=>{if(a&&!a.habilitado){this.msjError="El especialista no est\xE1 habilitado para iniciar sesi\xF3n.";return}this.auth.login(e,n).then(s=>g(this,null,function*(){if(!o.includes(e)&&!s.user.emailVerified){this.msjError="Debe confirmar su correo electr\xF3nico antes de iniciar sesi\xF3n.";return}console.log("Usuario logueado:",s.user),this.router.navigate(["/home"])})).catch(s=>{switch(s.code){case"auth/invalid-credential":this.msjError="Email o contrase\xF1a incorrectos";break;case"auth/invalid-email":this.msjError="EMAIL INCORRECTO.";break;default:this.msjError="ERROR al ingresar sesi\xF3n, verifique datos ingresados.";break}console.error("Error en el login:",s)})}).catch(a=>{console.error("Error al verificar el especialista:",a),this.msjError="Ocurri\xF3 un problema al validar el usuario."})}obtenerUsuarioActual(){let o=this.auth.obtenerUsuarioActual();console.log("Usuario actual:",o)}GuardarRegistroExitoso(){return g(this,null,function*(){let o={usuario:this.loginForm.get("correo")?.value};yield this.firestore.createDocument("logueos",o)})}static \u0275fac=function(e){return new(e||r)(m(P),m(G),m(D),m(V))};static \u0275cmp=v({type:r,selectors:[["app-login"]],standalone:!0,features:[S],decls:19,vars:3,consts:[[1,"login-container"],[1,"usuarios-rapidos"],[1,"usuarios"],["class","usuario-boton",3,"click",4,"ngFor","ngForOf"],[1,"login-form"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","correo"],["id","correo","formControlName","correo","type","email","placeholder","Correo electr\xF3nico",1,"form-input"],["for","contrasena"],["id","contrasena","formControlName","contrasena","type","password","placeholder","Contrase\xF1a",1,"form-input"],["type","submit",1,"submit-button"],[4,"ngIf"],[1,"usuario-boton",3,"click"],[1,"usuario-imagen",3,"src","alt"],[1,"form-label",2,"color","red"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),f(3,z,4,3,"button",3),t()(),i(4,"div",4)(5,"h2"),l(6,"Iniciar Sesi\xF3n"),t(),i(7,"form",5),b("ngSubmit",function(){return n.onLogin()}),i(8,"div",6)(9,"label",7),l(10,"Correo"),t(),u(11,"input",8),t(),i(12,"div",6)(13,"label",9),l(14,"Contrase\xF1a"),t(),u(15,"input",10),t(),i(16,"button",11),l(17,"Ingresar"),t()(),f(18,B,4,1,"div",12),t()()),e&2&&(c(3),p("ngForOf",n.usuariosRapidos),c(4),p("formGroup",n.loginForm),c(11),p("ngIf",n.msjError!=""))},dependencies:[M,O,k,U,L,w,I,R,N,A],styles:[".login-container[_ngcontent-%COMP%]{display:flex;height:100vh;justify-content:space-around;align-items:center;background:linear-gradient(45deg,gold,#e48080);padding:20px}.usuarios-rapidos[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px}.usuarios[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.usuario-boton[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:8px;padding:10px;cursor:pointer;width:120px;height:120px;text-align:center;transition:transform .3s}.usuario-boton[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.usuario-imagen[_ngcontent-%COMP%]{width:80px;height:80px}.login-form[_ngcontent-%COMP%]{background-color:#fff;padding:30px;border-radius:8px;box-shadow:0 4px 10px #0000004d}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-size:14px;font-weight:700}.form-input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:16px}.submit-button[_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#4caf50;color:#fff;border:none;border-radius:5px;font-size:16px;cursor:pointer;transition:background-color .3s}.submit-button[_ngcontent-%COMP%]:hover{background-color:#45a045}"]})};export{T as LoginComponent};
