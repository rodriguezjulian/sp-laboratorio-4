import{A as m,B as n,C as p,F as U,u as g,x as d,z as f}from"./chunk-JRXB4MSQ.js";import{_ as h,da as s}from"./chunk-SLHCDPS3.js";import{a as l,j as i}from"./chunk-4ZZIO3ZI.js";var v=class o{constructor(t,r){this.firestoreService=t;this.auth=r;f(this.auth,a=>{this.usuarioLogueado=a,console.log("Estado del usuario cambiado:",this.usuarioLogueado)}),this.auth.languageCode="es"}usuarioLogueado=null;createUser(t,r,a,w,u,c){return i(this,null,function*(){try{let e=yield d(this.auth,a,w);yield m(e.user);let y=yield this.firestoreService.createDocument(t,l({},r),e.user.uid);return console.log("Cliente agregado a Firestore con ID:",y),console.log("Sesi\xF3n cerrada para el usuario reci\xE9n creado"),yield p(this.auth),u!=null&&c!=null&&(yield n(this.auth,u,c)),e}catch(e){throw console.error("Error al crear usuario o agregarlo a Firestore:",e),e}})}getCurrentUser(){return this.auth.currentUser}login(t,r){return i(this,null,function*(){return console.log("estoy en el login"),n(this.auth,t,r)})}obtenerUsuarioActual(){return this.usuarioLogueado}logout(){return i(this,null,function*(){yield this.auth.signOut(),this.usuarioLogueado=null})}static \u0275fac=function(r){return new(r||o)(s(U),s(g))};static \u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"})};export{v as a};
