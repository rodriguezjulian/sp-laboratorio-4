import{a as A,b as w,c as U,d as z}from"./chunk-2DCWAD4R.js";import"./chunk-JTZ6XII4.js";import{b as C,d as l,f as P,g as y,k as I,l as R,m as F,n as M,r as O,t as T}from"./chunk-LDTLK62Q.js";import{a as q}from"./chunk-WRE3YE3W.js";import{a as G}from"./chunk-OLWY7DYE.js";import{a as N}from"./chunk-7FG5ZD4D.js";import{b as E}from"./chunk-5PFTZWDM.js";import"./chunk-3JXLYIF6.js";import{F as D,u as k,z as L}from"./chunk-JRXB4MSQ.js";import{Eb as g,Lc as x,Qc as S,Sb as n,Wa as a,Xa as d,_b as _,ia as v,kb as c,ob as s,wb as o,xb as e,yb as u}from"./chunk-SLHCDPS3.js";import{g as j,j as b}from"./chunk-4ZZIO3ZI.js";var h=j(G());function B(t,r){t&1&&(o(0,"span",30),n(1,"El nombre es obligatorio"),e())}function $(t,r){t&1&&(o(0,"span",30),n(1,"Solo se permiten letras"),e())}function Y(t,r){t&1&&(o(0,"span",30),n(1,"El apellido es obligatorio"),e())}function Z(t,r){t&1&&(o(0,"span",30),n(1,"Solo se permiten letras"),e())}function K(t,r){t&1&&(o(0,"span",30),n(1,"La edad es obligatoria"),e())}function W(t,r){t&1&&(o(0,"span",30),n(1,"La edad m\xEDnima es 1"),e())}function H(t,r){t&1&&(o(0,"span",30),n(1,"La edad m\xE1xima es 120"),e())}function J(t,r){t&1&&(o(0,"span",30),n(1,"El DNI es obligatorio"),e())}function Q(t,r){t&1&&(o(0,"span",30),n(1,"Debe tener exactamente 8 d\xEDgitos"),e())}function X(t,r){t&1&&(o(0,"span",30),n(1,"La obra social es obligatoria"),e())}function ee(t,r){t&1&&(o(0,"span",30),n(1,"Debe tener al menos 3 caracteres"),e())}function te(t,r){t&1&&(o(0,"span",30),n(1,"El correo es obligatorio"),e())}function re(t,r){t&1&&(o(0,"span",30),n(1,"Debe ser un correo v\xE1lido"),e())}function oe(t,r){t&1&&(o(0,"span",30),n(1,"La contrase\xF1a es obligatoria"),e())}function ie(t,r){t&1&&(o(0,"span",30),n(1,"Debe tener al menos 8 caracteres"),e())}function ne(t,r){t&1&&(o(0,"span",30),n(1,"Esta foto es obligatoria"),e())}function ae(t,r){t&1&&(o(0,"span",30),n(1,"Esta foto es obligatoria"),e())}var V=class t{constructor(r,m,i,f,p,se,le){this.fb=r;this.authService=m;this.auth=i;this.firestoreService=f;this.router=p;this.imagenService=se;this.loader=le;this.registroForm=this.fb.group({nombre:["",[l.required,l.pattern("^[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD1\\s]+$")]],apellido:["",[l.required,l.pattern("^[a-zA-Z\xE1\xE9\xED\xF3\xFA\xC1\xC9\xCD\xD3\xDA\xF1\xD1\\s]+$")]],edad:["",[l.required,l.min(1),l.max(120)]],dni:["",[l.required,l.pattern("^[0-9]{8}$")]],obraSocial:["",[l.required,l.minLength(3)]],correo:["",[l.required,l.email]],contrasena:["",[l.required,l.minLength(8)]],fotoPerfilUno:["",l.required],fotoPerfilDos:["",l.required]})}registroForm;file1;file2;token=!1;usuarioLogueado=null;proximaRuta="";ngOnInit(){return b(this,null,function*(){L(this.auth,r=>{this.usuarioLogueado=r||null})})}hasError(r,m){let i=this.registroForm.get(r);return!!i&&i.hasError(m)&&(i.dirty||i.touched)}uploadImageUno(r){this.file1=r.target.files[0]}uploadImageDos(r){this.file2=r.target.files[0]}onSubmit(){return b(this,null,function*(){if(this.loader.setLoader(!0),this.usuarioLogueado!=null){let r=this.usuarioLogueado.uid;console.log(r);let m=yield this.firestoreService.getUsuarioInfo(r);this.proximaRuta="/home",console.log(m.correo),console.log(m.contrasena)}if(this.registroForm.invalid){this.loader.setLoader(!1),h.default.fire({title:"Verifique datos ingresados",text:"\xA1Tenga en cuenta cumplir con las normas.!",icon:"error",confirmButtonText:"Aceptar"});return}yield this.crearPaciente(),this.loader.setLoader(!1)})}crearPaciente(){return b(this,null,function*(){try{let r=yield this.imagenService.subirImg(this.file1),m=yield this.imagenService.subirImg(this.file2),i={nombre:this.registroForm.get("nombre")?.value,apellido:this.registroForm.get("apellido")?.value,edad:this.registroForm.get("edad")?.value,dni:this.registroForm.get("dni")?.value,obraSocial:this.registroForm.get("obraSocial")?.value,correo:this.registroForm.get("correo")?.value,contrasena:this.registroForm.get("contrasena")?.value,autorizado:"no",urlFotoPerfil:r,urlFotoPerfilDos:m,rol:"paciente"};if(this.token){if(this.usuarioLogueado!=null){let f=this.usuarioLogueado.uid,p=yield this.firestoreService.getUsuarioInfo(f);yield this.authService.createUser("paciente",i,this.registroForm.get("correo")?.value,this.registroForm.get("contrasena")?.value,p.correo,p.contrasena)}else console.log("lo creo sin estar logueado"),yield this.authService.createUser("paciente",i,this.registroForm.get("correo")?.value,this.registroForm.get("contrasena")?.value);h.default.fire({title:"Paciente registrado",text:"\xA1Ya puede empezar a usar nuestro sitio!",icon:"success",confirmButtonText:"Aceptar"}),this.registroForm.reset(),this.router.navigate([this.proximaRuta])}else h.default.fire({title:"Error",text:"Verifica que no es un robot para continuar",icon:"error"})}catch(r){console.error("Error al registrar paciente:",r)}})}executeRecaptchaVisible(r){this.token=!this.token}static \u0275fac=function(m){return new(m||t)(d(O),d(q),d(k),d(D),d(E),d(z),d(N))};static \u0275cmp=v({type:t,selectors:[["app-registro-paciente"]],standalone:!0,features:[_],decls:65,vars:18,consts:[[1,"fondo"],[1,"container"],[1,"form-container"],[1,"card"],[1,"card-body"],[1,"title"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","nombre"],["id","nombre","formControlName","nombre","type","text",1,"form-input"],["class","error-message",4,"ngIf"],["for","apellido"],["id","apellido","formControlName","apellido","type","text",1,"form-input"],["for","edad"],["id","edad","formControlName","edad","type","number",1,"form-input"],["for","dni"],["id","dni","formControlName","dni","type","text",1,"form-input"],["for","obraSocial"],["id","obraSocial","formControlName","obraSocial","type","text",1,"form-input"],["for","correo"],["id","correo","formControlName","correo","type","email",1,"form-input"],["for","contrasena"],["id","contrasena","formControlName","contrasena","type","password",1,"form-input"],["for","fotoPerfilUno"],["type","file","id","fotoPerfilUno","formControlName","fotoPerfilUno",3,"change"],["for","fotoPerfilDos"],["type","file","id","fotoPerfilDos","formControlName","fotoPerfilDos",3,"change"],["siteKey","6LfBWIoqAAAAAG9GDoRLUsrzEVeUtSbt1F7z--Y7",3,"resolved"],[1,"button-container"],["type","submit",1,"submit-button"],[1,"error-message"]],template:function(m,i){m&1&&(o(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2",5),n(6,"Registro de Paciente"),e(),o(7,"form",6),g("ngSubmit",function(){return i.onSubmit()}),o(8,"div",7)(9,"label",8),n(10,"Nombre"),e(),u(11,"input",9),c(12,B,2,0,"span",10)(13,$,2,0,"span",10),e(),o(14,"div",7)(15,"label",11),n(16,"Apellido"),e(),u(17,"input",12),c(18,Y,2,0,"span",10)(19,Z,2,0,"span",10),e(),o(20,"div",7)(21,"label",13),n(22,"Edad"),e(),u(23,"input",14),c(24,K,2,0,"span",10)(25,W,2,0,"span",10)(26,H,2,0,"span",10),e(),o(27,"div",7)(28,"label",15),n(29,"DNI"),e(),u(30,"input",16),c(31,J,2,0,"span",10)(32,Q,2,0,"span",10),e(),o(33,"div",7)(34,"label",17),n(35,"Obra Social"),e(),u(36,"input",18),c(37,X,2,0,"span",10)(38,ee,2,0,"span",10),e(),o(39,"div",7)(40,"label",19),n(41,"Correo"),e(),u(42,"input",20),c(43,te,2,0,"span",10)(44,re,2,0,"span",10),e(),o(45,"div",7)(46,"label",21),n(47,"Contrase\xF1a"),e(),u(48,"input",22),c(49,oe,2,0,"span",10)(50,ie,2,0,"span",10),e(),o(51,"div",7)(52,"label",23),n(53,"Primera Foto"),e(),o(54,"input",24),g("change",function(p){return i.uploadImageUno(p)}),e(),c(55,ne,2,0,"span",10),e(),o(56,"div",7)(57,"label",25),n(58,"Segunda Foto"),e(),o(59,"input",26),g("change",function(p){return i.uploadImageDos(p)}),e(),c(60,ae,2,0,"span",10),e(),o(61,"re-captcha",27),g("resolved",function(p){return i.executeRecaptchaVisible(p)}),e(),o(62,"div",28)(63,"button",29),n(64,"Registrar Paciente"),e()()()()()()()()),m&2&&(a(7),s("formGroup",i.registroForm),a(5),s("ngIf",i.hasError("nombre","required")),a(),s("ngIf",i.hasError("nombre","pattern")),a(5),s("ngIf",i.hasError("apellido","required")),a(),s("ngIf",i.hasError("apellido","pattern")),a(5),s("ngIf",i.hasError("edad","required")),a(),s("ngIf",i.hasError("edad","min")),a(),s("ngIf",i.hasError("edad","max")),a(5),s("ngIf",i.hasError("dni","required")),a(),s("ngIf",i.hasError("dni","pattern")),a(5),s("ngIf",i.hasError("obraSocial","required")),a(),s("ngIf",i.hasError("obraSocial","minlength")),a(5),s("ngIf",i.hasError("correo","required")),a(),s("ngIf",i.hasError("correo","email")),a(5),s("ngIf",i.hasError("contrasena","required")),a(),s("ngIf",i.hasError("contrasena","minlength")),a(5),s("ngIf",i.hasError("fotoPerfilUno","required")),a(5),s("ngIf",i.hasError("fotoPerfilDos","required")))},dependencies:[T,I,C,R,P,y,F,M,S,x,w,A,U],styles:[".fondo[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;align-items:center;margin:0;padding:0;background:linear-gradient(45deg,gold,#e48080);background-attachment:fixed;background-size:cover;background-repeat:no-repeat}.especialidad[_ngcontent-%COMP%]{color:black !}.container[_ngcontent-%COMP%]{max-width:600px;width:100%;padding:20px}.select-black[_ngcontent-%COMP%]{color:#000;background-color:#fff;border:1px solid #ffee00;border-radius:5px;padding:10px;appearance:none;-webkit-appearance:none;-moz-appearance:none}.select-black[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#000;background-color:#fff}.card[_ngcontent-%COMP%]{background-color:#343a40;border-radius:1rem;padding:2rem;color:#fff;text-align:center;box-shadow:0 8px 20px #0003}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:20px}label[_ngcontent-%COMP%]{margin-bottom:5px;font-size:.9rem;color:#ccc;text-align:left}.form-input[_ngcontent-%COMP%]{padding:10px;border:1px solid rgba(255,255,255,.3);border-radius:5px;background-color:#ffffff1a;color:#fff;font-size:1rem;transition:border .3s}.form-input[_ngcontent-%COMP%]:focus{outline:none;border:1px solid #ffee00}.new-specialty[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.specialty-container[_ngcontent-%COMP%]{display:flex;gap:10px}.specialty-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 15px;border:none;background-color:#fe0;color:#000;border-radius:5px;cursor:pointer;font-size:.9rem;transition:background-color .3s ease}.specialty-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#e6d000}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.error-message[_ngcontent-%COMP%]{color:red}.submit-button[_ngcontent-%COMP%]{padding:10px 20px;font-size:1rem;border:none;background-color:#4caf50;color:#fff;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.submit-button[_ngcontent-%COMP%]:hover{background-color:#45a045}"]})};export{V as RegistroPacienteComponent};
